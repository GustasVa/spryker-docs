<script src="https://cdn.jsdelivr.net/npm/algoliasearch@4.5.1/dist/algoliasearch-lite.umd.js"></script>
<script src="{{ "/js/algolia-search.js"}}" type="text/javascript"></script>
<div id="search-demo-container">
    <input type="text" id="search-input" placeholder="{{site.data.strings.search_placeholder_text}}">
    <ul id="results-container"></ul>
</div>
<script type="text/javascript">
    let AlgoliaApiClient = {
        client: null,
        init: function () {
            this.client = algoliasearch('{{ site.algolia.application_id }}', '{{ site.algolia.search_only_api_key }}');
        },
        search: function (searchTerm, callback) {
            let index = this.client.initIndex('{{ site.algolia.index_name }}');
            index.search(searchTerm).then(({hits}) => {
                callback(hits);
            });
        }
    };
    AlgoliaApiClient.init();

    AlgoliaSearch.init({
        searchInput: document.getElementById('search-input'),
        resultsContainer: document.getElementById('results-container'),
        resultTemplate: '<li><a href="{url}" title="{title}">{title}</a></li>'
    }, AlgoliaApiClient);
</script>
